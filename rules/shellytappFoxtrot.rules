// NON FUNZIONA: aggiorna lo state ALLA FINE del comando.
// Da tenere solo come esempio, usare quelli sotto!!!
//
//rule "shellytappFoxtrot changed"
//when
//	Item shellytappFoxtrot_roller received command 
//then
//	//var percent = (shellytappFoxtrot_roller.state as number).intvalue
//	executeCommandLine("curl http://172.27.72.109/" + shellytappFoxtrot_roller.state)
//end

rule "shellytappFoxtrot UP"
when 
	Item shellytappFoxtrot_roller received command UP
then
	//executeCommandLine("curl http://172.27.72.109/rpc/Cover.Open?id=0")
	//executeCommandLine("mosquitto_pub -h localhost -p 1883 -t shellies/shellytappFoxtrot/command/cover:0 -m open")
	publish("broker", "shellies/shellytappFoxtrot/command/cover:0", "open")
end

rule "shellytappFoxtrot DOWN"
when 
	Item shellytappFoxtrot_roller received command DOWN
then
	//executeCommandLine("curl http://172.27.72.109/rpc/Cover.Close?id=0")
	//executeCommandLine("mosquitto_pub -h localhost -p 1883 -t shellies/shellytappFoxtrot/command/cover:0 -m close")
	publish("broker", "shellies/shellytappFoxtrot/command/cover:0", "close")
end

rule "shellytappFoxtrot STOP"
when 
	Item shellytappFoxtrot_roller received command STOP
then
	//executeCommandLine("curl http://172.27.72.109/rpc/Cover.Stop?id=0")
	//executeCommandLine("mosquitto_pub -h localhost -p 1883 -t shellies/shellytappFoxtrot/command/cover:0 -m stop")
	publish("broker", "shellies/shellytappFoxtrot/command/cover:0", "stop")
end
