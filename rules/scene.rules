rule "Lavoro"
when
    Item Scene_Lavoro changed to ON
then
   logInfo("Scene","Scena LAVORO: iniziata")
      Scene_aCasa.sendCommand(OFF)
      Scene_Usciamo.sendCommand(OFF)
      Scene_Chiudi.sendCommand(OFF)
      gTappDog.sendCommand(DOWN)
    Thread::sleep(30)
      Scene_Lavoro.sendCommand(OFF)
   logInfo("Scene","Scena LAVORO: finita")
end

rule "A Casa"
when
    Item Scene_aCasa changed to ON
then
   logInfo("Scene","Scena A CASA: iniziata")
      Scene_Lavoro.sendCommand(OFF)
      Scene_Usciamo.sendCommand(OFF)
      Scene_Chiudi.sendCommand(OFF)
      gTappProd.sendCommand(UP)
      IPCams.sendCommand(OFF)
    Thread::sleep(30)
      Scene_aCasa.sendCommand(OFF)
   logInfo("Scene","Scena A CASA: finita")
end

rule "Usciamo"
when
    Item Scene_Usciamo changed to ON
then
   logInfo("Scene","Scena USCIAMO: iniziata")
      Scene_Lavoro.sendCommand(OFF)
      Scene_aCasa.sendCommand(OFF)
      Scene_Chiudi.sendCommand(OFF)
      gTappProd.sendCommand(DOWN)
    createTimer(now.plusSeconds(30), [|
      IPCams.sendCommand(ON)
      logInfo("Scene","Scena USCIAMO: Telecamere accese")
      AutoRientro.sendCommand(ON)
      gScene.sendCommand(OFF)
      logInfo("Scene","Scena USCIAMO: finita")
    ])
end

rule "Chiudi tutto"
when
    Item Scene_Chiudi changed to ON
then
    logInfo("Scene","Scena CHIUDI: iniziata")
    gTappProd.sendCommand(DOWN)
    createTimer(now.plusSeconds(30), [|
      gScene.sendCommand(OFF)
      logInfo("Scene","Scena CHIUDI: finita")
    ])
end

rule "Vado a Letto"
when
    Item Scene_aLetto changed to ON
then
    logInfo("Scene","Scena A Letto: iniziata")
    gTappProd.sendCommand(DOWN)
    logInfo("Scene","Scena A Letto: tapparelle abbassate")
    NAS2.sendCommand(OFF)
    Net_TV.sendCommand(OFF)
    Stereo.sendCommand(OFF)
    logInfo("Scene","Scena A Letto: Server, Stereo e PC spenti")
    sf04_Light.sendCommand(OFF)
    sf03_Light.sendCommand(OFF)
    logInfo("Scene","Scena A Letto: Luci soggiorno spente")
    createTimer(now.plusSeconds(30), [|
      Air_Conditioner_Temperature.sendCommand(10.0)
      logInfo("Scene","Scena A Letto: aria condizionata impostata a spenta: 10.0")
      gScene.sendCommand(OFF)
      logInfo("Scene","Scena A Letto: finita")
    ])
end
