//*******************************************************************
//AIR CONDITIONER
//*******************************************************************
rule "Air Conditioner"
    when
        Item Air_Conditioner_Mode received command 
    then
        logInfo("Air Conditioner Mode",receivedCommand + "" +Air_Conditioner_Mode )
        var String command;
        //sendCommand(Notifications, "Prendiendo Aire Condicionado")

        if ((Air_Conditioner_Mode.state+"") == "cool")  command = "/opt/clima/imposta-temp-C.sh " + Air_Conditioner_Temperature.state;
        if ((Air_Conditioner_Mode.state+"") == "heat")   command = "/opt/clima/imposta-temp-H.sh " + Air_Conditioner_Temperature.state;
        if ((Air_Conditioner_Mode.state+"") == "off")   command = "/opt/clima/imposta-temp.sh SPENTO";

    logInfo("Air Conditioner",command)
      executeCommandLine(command);

end


rule "Air Conditioner Temp"
    when
        Item Air_Conditioner_Temperature received command
    then
        logInfo("Air Conditioner",receivedCommand + "" +Air_Conditioner_Mode )
        var String command;
        if ((Air_Conditioner_Mode.state+"") == "cool")  command = "/opt/clima/imposta-temp-C.sh " + Air_Conditioner_Temperature.state;
        if ((Air_Conditioner_Mode.state+"") == "heat")   command = "/opt/clima/imposta-temp-H.sh " + Air_Conditioner_Temperature.state;

      logInfo("Air Conditioner",command)
      executeCommandLine(command);

      // Sync to Termostato Slow 
      var Number cdzTemp
      switch(receivedCommand.toString) {
        case "10.0": { cdzTemp = 0 }
        case "17.0": { cdzTemp = 1 }
        case "18.0": { cdzTemp = 2 }
        case "19.0": { cdzTemp = 3 }
        case "20.0": { cdzTemp = 4 }
        case "21.0": { cdzTemp = 5 }
        case "23.0": { cdzTemp = 6 }
        case "30.0": { cdzTemp = 7 }
        case "31.0": { cdzTemp = 8 }
        case "10": { cdzTemp = 0 }
        case "17": { cdzTemp = 1 }
        case "18": { cdzTemp = 2 }
        case "19": { cdzTemp = 3 }
        case "20": { cdzTemp = 4 }
        case "21": { cdzTemp = 5 }
        case "23": { cdzTemp = 6 }
        case "30": { cdzTemp = 7 }
        case "31": { cdzTemp = 8 }
        }
      acPSoggiorno.postUpdate(cdzTemp)

end


rule "Air Conditioner Airdir"
    when
        Item Air_Conditioner_Airdir received command
    then
        logInfo("Air Conditioner",receivedCommand + "" +Air_Conditioner_Mode )
        var String command;
        // Non importa se HOT o COLD l'airdir Ã¨ sempre uguale!
        if ((Air_Conditioner_Mode.state+"") == "cool")  command = "/opt/clima/imposta-temp-C.sh AIRDIR " + Air_Conditioner_Airdir.state;
        if ((Air_Conditioner_Mode.state+"") == "heat")   command = "/opt/clima/imposta-temp-H.sh AIRDIR " + Air_Conditioner_Airdir.state;        
    logInfo("Air Conditioner",command)
        executeCommandLine(command);
end


rule "Air Conditioner Screen"
    when
        Item Air_Conditioner_Screen received command 
    then
        logInfo("Air Conditioner Screen",receivedCommand + "")
        var String command;
        command = "/opt/clima/imposta-temp.sh LED";
        executeCommandLine(command);
end


rule "Air Conditioner Swing"
    when
        Item Air_Conditioner_Swing received command
    then
        logInfo("Air Conditioner Swing",receivedCommand + "")
        var String command;
        command = "/opt/clima/imposta-temp.sh SWING";
        executeCommandLine(command);
end

